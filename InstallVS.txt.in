
set(PROJECT_SOURCE_DIR "@PROJECT_SOURCE_DIR@")
set(SAMPLES_SOURCE_DIR "@SAMPLES_SOURCE_DIR@")
set(PROJECT_BINARY_DIR "@PROJECT_BINARY_DIR@")
set(SAMPLES_BUILD_TEMP_DIR "@SAMPLES_BUILD_TEMP_DIR@")

MESSAGE("Configuring sdk sample VS2013 projects...")
MESSAGE("SAMPLES_SOURCE_DIR: ${SAMPLES_SOURCE_DIR}")

configure_file("${PROJECT_SOURCE_DIR}/samples-aux/CMakeCache.txt.in"
               "${SAMPLES_BUILD_TEMP_DIR}/CMakeCache.txt"
               @ONLY)

execute_process(COMMAND cmake.exe "${SAMPLES_BUILD_TEMP_DIR}"
                WORKING_DIRECTORY ${SAMPLES_SOURCE_DIR})

MESSAGE("Removing CMake from VS2013 projects...")

set(CMAKE_GEN_FILES_TO_DELETE
    "${SAMPLES_BUILD_TEMP_DIR}/ALL_BUILD.vcxproj"
    "${SAMPLES_BUILD_TEMP_DIR}/ALL_BUILD.vcxproj.filters"
    "${SAMPLES_BUILD_TEMP_DIR}/cmake_install.cmake"
    "${SAMPLES_BUILD_TEMP_DIR}/CMakeCache.txt"
    "${SAMPLES_BUILD_TEMP_DIR}/ZERO_CHECK.vcxproj"
    "${SAMPLES_BUILD_TEMP_DIR}/ZERO_CHECK.vcxproj.filters"
    )

file(REMOVE ${CMAKE_GEN_FILES_TO_DELETE})

execute_process(COMMAND clisp.exe "parse-replace.cl" "${SAMPLES_BUILD_TEMP_DIR}"
                WORKING_DIRECTORY "${PROJECT_SOURCE_DIR}/lpp/")

MESSAGE("Done configuring sdk sample VS2013 projects.")
